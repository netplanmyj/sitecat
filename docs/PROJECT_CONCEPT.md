# SiteCat - プロジェクト概要

> **対象読者**: プロジェクト関係者、新規メンバー、ステークホルダー  
> **目的**: SiteCatが何を目指すプロジェクトか、なぜ作るのか、主要機能の概要を理解する  
> **ドキュメントバージョン**: v2.1  
> **最終更新**: 2025年12月

---

## プロジェクト概要

SiteCatは、指定されたウェブサイトの死活監視とリンク切れ検出を行うiOS向けFlutterアプリケーションです。無料版では手動監視機能を提供し、段階的に有料機能を展開するフリーミアムモデルを採用しています。

**現在の状況**: v1.0.3+ - App Store配信中（175カ国）

### ビジネスモデル
- **無料版**: 手動監視、1サイト制限、Firebase最小限利用でコスト抑制
- **買い切り版（¥1,200）**: サイト数無制限、除外パス設定、中断・再開機能、履歴50件表示
- **サブスクリプション（¥490/月）**: 買い切り機能 + 自動監視、プッシュ通知、詳細レポート

> ビジネスモデル詳細は [BUSINESS_MODEL.md](./BUSINESS_MODEL.md) を参照してください。

## 主要機能

### 1. ウェブサイト死活監視（Quick Check）
- HTTPステータスコードチェック（200, 404, 500など）
- レスポンス時間の測定
- 手動実行（無料版）
- 自動監視（サブスクリプション版、1日4回）
- アップタイム/ダウンタイムの統計・グラフ表示

### 2. リンク切れ検出（Site Scan）
- サイトマップベースのURL収集
- サイト内リンクのクロール・検証
- 404エラー、タイムアウトなどの検出
- 除外パス設定（有料版）
- 詳細なエラーレポート
- 中断・再開機能（有料版）

### 3. マルチデバイス対応
- Firebase Authenticationによるユーザー認証（Google, Apple Sign-In）
- Cloud Firestoreでのデータ同期
- **iOS専用アプリ**（現在）
- リアルタイムデータ同期

> **Note**: SiteCatは現在iOS専用アプリです。モバイルでの即座確認とプッシュ通知を重視し、開発効率とユーザー体験を最適化しています。Android版は将来的に検討中です。

### 4. 通知機能（計画中）
- プッシュ通知（Firebase Cloud Messaging）- サブスクリプション版
- メール通知（将来検討）
- Slack/Discord連携（将来検討）

## 技術スタック

- **フロントエンド**: Flutter 3.27.3 / Dart 3.10.1
- **バックエンド**: Firebase (Authentication, Firestore, Cloud Functions)
- **監視**: HTTP Client, XML/HTML Parser
- **グラフ**: fl_chart
- **CI/CD**: Xcode Cloud
- **将来追加予定**: Firebase Cloud Messaging, Cloud Run (自動監視)

> 技術詳細は [DEVELOPMENT_GUIDE.md](./DEVELOPMENT_GUIDE.md) を参照してください。

## アーキテクチャ（概要）

```
Flutter App (iOS) ◄──► Firebase ◄──► Cloud Functions ◄──► Target Websites
    │                     │                   │
    │                     │                   └─ Quick Check (サイト監視)
    │                     │                      Site Scan (リンクチェック)
    │                     └─ 認証・データ保存・通知（将来）
    └─ iOS専用（Android将来検討）
```

> アーキテクチャ詳細は [DEVELOPMENT_GUIDE.md](./DEVELOPMENT_GUIDE.md) を参照してください。

## 現在の開発状況

### ✅ Phase 1: MVP完成・App Storeリリース（完了）
**期間**: 2025年Q4  
**成果**: v1.0.x

- Firebase プロジェクト設定
- 認証システム（Google Sign-In, Apple Sign-In）
- サイト管理機能（追加・編集・削除、1サイト制限）
- Quick Check（手動監視、カウントダウンタイマー）
- 基本統計表示（アップタイム、レスポンス時間）
- 監視履歴（Quick Check 10件、Site Scan 10件）
- **App Store審査通過・配信開始（175カ国）**

### ✅ Phase 2: リンク切れチェック強化（完了）
**期間**: 2025年Q4  
**成果**: v1.0.x

- HTML/XMLサイトマップ解析機能
- リンク有効性チェック（内部・外部リンク対応）
- 壊れたリンクのレポート表示
- Site Scan機能（進行状況表示、中断・再開 UI）
- Quick CheckとSite Scanのタブ分離（独立したカウントダウンタイマー）
- UI大規模リファクタリング（コード可読性・保守性向上）
- **除外パス設定（バックエンド実装完了、PR #195マージ）**
- Flutter 3.38.3へのアップグレード（PR #196マージ）
- 168テスト成功

### 🔄 Phase 3a: 買い切り有料版（次のフェーズ）
**予定**: 2025年Q4～  
**価格**: ¥1,200（一度の購入）  
**関連**: #193, #197

#### 実装予定機能
1. **In-App Purchase統合**
   - StoreKit 2対応
   - 課金状態管理（Firestore）
   - リストア機能

2. **サイト数制限解除**
   - 1サイト → 無制限
   - 定数変更のみ

3. **除外パス設定UI** (#197)
   - 設定画面実装
   - パス入力・検証
   - プレビュー機能

4. **Site Scan中断・再開機能** (#193)
   - Isolate管理改善
   - 一時停止・再開ロジック
   - 進捗状態の永続化

5. **履歴表示拡張**
   - Quick Check: 10件 → 50件
   - Site Scan: 10件 → 50件

### 📅 Phase 3b: サブスクリプション版（将来計画）
**予定**: 2026年Q1～  
**価格**: ¥490/月（買い切り機能すべて含む）

#### 実装予定機能
1. **Cloud Run定期実行**
   - Cloud Scheduler設定
   - 1日4回（6時間ごと）自動監視
   - 課金状態確認と実行制御

2. **プッシュ通知**
   - Firebase Cloud Messaging統合
   - リンク切れ検出時の通知
   - 通知設定UI

3. **詳細レポート機能**
   - 推移グラフ強化
   - 統計サマリー
   - エクスポート機能（将来検討）

### 🚀 Phase 4以降: 将来的な拡張（検討中）
- Android版の開発
- チーム機能（複数ユーザーでのサイト共有）
- Slack/Discord連携
- API提供
- Enterprise プラン

> 詳細なロードマップは [DEVELOPMENT_GUIDE.md](./DEVELOPMENT_GUIDE.md) を参照してください。

## 次のステップ

### 短期（Phase 3a: 2025年Q4～）
1. **ドキュメント整備** (#198)
   - BUSINESS_MODEL.md更新
   - DEVELOPMENT_GUIDE.md更新
   
2. **買い切り版実装**
   - In-App Purchase統合
   - 除外パス設定UI (#197)
   - Site Scan中断・再開 (#193)
   - 履歴表示拡張

3. **App Store審査・配信**
   - v1.1.0リリース

### 中期（Phase 3b: 2026年Q1～）
1. **サブスクリプション実装**
   - Cloud Run定期実行
   - プッシュ通知
   - 詳細レポート

### 長期（Phase 4: 2026年Q2～）
1. **Android版開発検討**
2. **機能拡張**（チーム機能、API連携）

## 想定される課題と対策

### 技術的課題
- **Rate Limiting**: 監視対象サイトへの過度なアクセス防止
  - 対策: Quick Check 5分間隔制限実装済み、自動監視は6時間間隔
  
- **スケーラビリティ**: 大量のサイト監視に対応
  - 対策: Firebase Firestoreのスケーラブル設計、Cloud Run活用
  
- **パフォーマンス**: 応答速度の最適化
  - 対策: タイムアウト設定（30秒）、Isolateでのバックグラウンド処理
  
 - **Site Scan負荷**: 大規模サイトでの処理時間
  - 対策: 中断・再開機能、除外パス設定、進捗表示

### ビジネス課題
- **コスト管理**: Firebase/Cloud Run使用量の最適化
  - 対策: 無料版は手動監視のみ、サブスクのみ自動実行、効率的なデータ設計
  
- **ユーザビリティ**: 直感的で使いやすいUI/UX
  - 対策: 継続的な改善、ユーザーフィードバック反映
  
- **収益化**: 適切な価格設定と機能差別化
  - 対策: 段階的な有料化（買い切り→サブスク）、明確な価値提案
  
- **App Store審査**: 継続的な審査対応
  - 対策: ガイドライン遵守、ドキュメント整備

---

## 関連ドキュメント

- **[BUSINESS_MODEL.md](./BUSINESS_MODEL.md)**: ビジネスモデル、価格プラン、App Store審査対応
- **[PRICING_STRATEGY.md](./PRICING_STRATEGY.md)**: 有料化戦略、実装ロードマップ、技術詳細
- **[DEVELOPMENT_GUIDE.md](./DEVELOPMENT_GUIDE.md)**: 技術詳細、アーキテクチャ、開発環境セットアップ

---

**最終更新**: 2025年12月3日  
**現在のバージョン**: v1.0.3 (Build 41) - App Store配信中  
**次期バージョン**: v1.0.4 (Build 42) - 開発中（除外パス機能追加）